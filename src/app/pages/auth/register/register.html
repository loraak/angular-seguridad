<p-toast></p-toast>

<div class="flex justify-content-center align-items-center py-5" style="min-height: 100vh; background: #f8f9fa;">
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" style="width: 100%; max-width: 480px;">
        <p-card>
            <ng-template pTemplate="header">
                <div class="text-center pt-4 pb-2 px-4">
                    <h2 style="margin: 0.5rem 0 0.25rem; font-size: 1.5rem; font-weight: 700; color: #1e293b;">
                        Registro de Usuario
                    </h2>
                    <p style="margin: 0; color: #94a3b8; font-size: 0.875rem;">
                        Completa el formulario para crear tu cuenta
                    </p>
                </div>
            </ng-template>

            <div class="px-3" style="display: flex; flex-direction: column; gap: 1.5rem;">
                <div>
                    <p-floatlabel>
                        <input id="nombreCompleto" type="text" pInputText formControlName="nombreCompleto" class="w-full">
                        <label for="nombreCompleto">Nombre Completo</label>
                    </p-floatlabel>
                    <small *ngIf="f['nombreCompleto'].touched && f['nombreCompleto'].errors?.['required']" class="p-error block mt-1">
                        El nombre completo es requerido.
                    </small>
                </div>

                <div>
                    <p-floatlabel>
                        <input id="email" type="email" pInputText formControlName="email" class="w-full">
                        <label for="email">Email</label>
                    </p-floatlabel>
                    <div *ngIf="f['email'].touched && f['email'].errors" class="mt-1">
                        <small *ngIf="f['email'].errors?.['required']" class="p-error block">El email es requerido.</small>
                        <small *ngIf="f['email'].errors?.['email']" class="p-error block">Formato de email inválido.</small>
                    </div>
                </div>

                <div>
                    <p-floatlabel>
                        <p-password
                            inputId="password"
                            formControlName="password"
                            [toggleMask]="true"
                            styleClass="w-full"
                            inputStyleClass="w-full"
                            [feedback]="true">
                        </p-password>
                        <label for="password">Contraseña</label>
                    </p-floatlabel>
                    <div *ngIf="f['password'].touched && f['password'].errors" class="mt-1">
                        <small *ngIf="f['password'].errors?.['required']" class="p-error block">La contraseña es requerida.</small>
                        <small *ngIf="f['password'].errors?.['passwordStrength']" class="p-error block">
                            Mínimo 10 caracteres y un símbolo especial (!@#$...).
                        </small>
                    </div>
                </div>

                <div>
                    <p-floatlabel>
                        <p-password
                            inputId="confirmPassword"
                            formControlName="confirmPassword"
                            [toggleMask]="true"
                            styleClass="w-full"
                            inputStyleClass="w-full"
                            [feedback]="false">
                        </p-password>
                        <label for="confirmPassword">Confirmar Contraseña</label>
                    </p-floatlabel>
                    <div *ngIf="f['confirmPassword'].touched && f['confirmPassword'].errors" class="mt-1">
                        <small *ngIf="f['confirmPassword'].errors?.['required']" class="p-error block">
                            La confirmación de contraseña es requerida.
                        </small>
                        <small *ngIf="f['confirmPassword'].errors?.['passwordMismatch']" class="p-error block">
                            Las contraseñas no coinciden.
                        </small>
                    </div>
                </div>

                <div>
                    <p-floatlabel>
                        <input id="direccion" type="text" pInputText formControlName="direccion" class="w-full">
                        <label for="direccion">Dirección</label>
                    </p-floatlabel>
                    <small *ngIf="f['direccion'].touched && f['direccion'].errors?.['required']" class="p-error block mt-1">
                        La dirección es requerida.
                    </small>
                </div>

                <div>
                    <p-floatlabel>
                        <p-inputmask
                            inputId="fechaNacimiento"
                            formControlName="fechaNacimiento"
                            mask="99/99/9999"
                            placeholder="DD/MM/AAAA"
                            styleClass="w-full"
                            inputStyleClass="w-full">
                        </p-inputmask>
                    </p-floatlabel>
                    <div *ngIf="f['fechaNacimiento'].touched && f['fechaNacimiento'].errors" class="mt-1">
                        <small *ngIf="f['fechaNacimiento'].errors?.['required']" class="p-error block">
                            La fecha de nacimiento es requerida.
                        </small>
                        <small *ngIf="f['fechaNacimiento'].errors?.['notAdult']" class="p-error block">
                            Debe ser mayor de 18 años.
                        </small>
                    </div>
                </div>

                <div>
                    <p-floatlabel>
                        <input id="telefono" type="text" pInputText formControlName="telefono" class="w-full" pKeyFilter="int">
                        <label for="telefono">Teléfono</label>
                    </p-floatlabel>
                    <div *ngIf="f['telefono'].touched && f['telefono'].errors" class="mt-1">
                        <small *ngIf="f['telefono'].errors?.['required']" class="p-error block">El número de teléfono es requerido.</small>
                        <small *ngIf="f['telefono'].errors?.['pattern']" class="p-error block">Solo se permiten números.</small>
                    </div>
                </div>

            </div>

            <ng-template pTemplate="footer">
                <div class="flex justify-content-center px-3 pb-3">
                    <p-button
                        label="Registrarse"
                        type="submit"
                        styleClass="w-full mt-3"
                        [disabled]="registerForm.invalid">
                    </p-button>
                </div>
            </ng-template>
        </p-card>
    </form>
</div>